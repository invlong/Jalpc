---
layout: post
title:  "scp发布项目"
date:   2017-03-29
desc: "scp-Ubuntu和Centos文件传输"
keywords: "ssh,scp,centos"
categories: [Linux]
tags: [ssh,scp,centos]
icon: icon-html
---

>之前配置好ssh别名，RSA秘钥访问服务器后，今天开始发布项目了，进而，涉及到本地文件与服务器之间的拷贝问题。这里就详细记录下方法之-scp

_scp就是secure copy 一个在linux下用来进行远程拷贝文件的命令。有时我们需要获得远程服务器上的某个文件，该服务器既没有配置ftp服务器，也没有做共享，无法通过常规途径获得文件时，只需要通过简单的scp命令便可达到目的。其实质也是通过SSH协议来进行传输数据_  

一.将本机文件拷贝到服务器
-
```shell
scp /home/administrator/news.txt root@192.168.6.129:/etc/squid
```
__1.来分析这条命令，首先是本地文件的路径，路径前加`/`说明这是从本地的根目录来找文件，当然你也可以不加`/`，从你的用户的根目录开始找。__  
__2.root为要登录的远程服务器的用户名，`@`后为ip地址，这里要记住`:`后面，一定要跟`/`，不可以用相对路径，否则的话，会识别为文件名，讲你的文件重命名为ip后面的名字。__  

二.将文件从服务器拷贝到本地
-
_我的理解是从服务器下载文件到本地_  
```shell
scp  root@120.18.50.33:/data/ha97.zip /home/
```
三.参数解析
-
  
-1 强制scp 用协议1  
-2 强制scp 用协议2  
-4 强制scp用IPV4的网址  
-6 强制scp用IPV6的网址  
-B 选择批处理模式（防止输入密码）  
-C 允许压缩。 标注-C到ssh(1)来允许压缩  
-c cipher  
选择cipher来加密数据传输。这个选项直接传递到ssh(1)  
-F ssh_config  
设定一个可变动的用户配置给ssh.这个选项直接会被传递到ssh(1)  
-i identity_file  
选择被RSA认证读取私有密码的文件。这个选项可以直接被传递到ssh(1)  
-l limit  
限制传输带宽，也就是速度 用Kbit/s的速度  
-o ssh_option  
可以把ssh_config中的配置格式传到ssh中。这种模式对于说明没有独立的scp文件中断符的scp很有帮助。关于选项的如下。而他们的值请参看ssh_config(5)  
-P port  
指定连接远程连接端口。注意这个选项需要写成大写的模式。因为-p已经早保留了次数和模式  
-S program  
指定一个加密程序。这个程序必须可读所有ssh(1)的选项。  
-p 指定修改次数，连接次数，还有对于原文件的模式  
-q 把进度参数关掉  
-r 递归的复制整个文件夹  
-S program  
指定一个加密程序。这个程序必须可读所有ssh(1)的选项。  
-V 冗余模式。 让 scp 和 ssh(1) 打印他们的排错信息， 这个在排错连接，认证，和配置中非常有用。  

四.使用别名进行文件拷贝
-
_由于我配置了ssh-rsa证书，所以可以使用别名进行文件拷贝，作为我发布项目的记录_  
___mpcctp___  
```shell
# mpcctp - 到测试服务器
scp -r wuxl/mpcctp.war test:/home/mobpay/app/app-tomcat/webapps/
```
```shell
# mpcctp - 到生产服务器
scp -r wuxl/mpcctp.war pro:/home/mobpay/app-tomcat/webapps/mpcctp.war
```
___pay___  
```shell
# pay - 到测试服务器
scp -r wuxl/pay.war test:/home/mobpay/app/web-tomcat/webapps/
```
```shell
# pay - 到生产服务器
scp -r wuxl/pay.war pro:/home/mobpay/tomcat-web/webapps/
```
__prm__
```shell
# prm - 到测试服务器
scp -r wuxl/prm.war test:/home/mobpay/app/web-tomcat/webapps/
```
```shell
# prm - 到生产服务器
scp -r wuxl/prm.war pro:/home/mobpay/tomcat-web/webapps/
```
___以后会些一些简单的脚本进行发布___