---
layout: post
title:  "介质服务测试说明文档"
date:   2018-03-20 14:18:08 +0800
categories: material
tag: material
---

* content
{:toc}



## 一.测试功能点  
### 1.发卡同步  
#### ①小数据量的同步：  
包括 发卡,补卡,卡片挂失,卡片解挂,卡片冻结,卡片解冻,退卡,卡片导入,卡片预升级,卡片升级,更新卡片有效期  
目标：执行上述操作，介质服务可以正确同步信息到数据库中。  
#### ②批量数据导入：  
发卡程序执行大批量的卡片同步操作。  
目标：程序能够抗住100万级别的压力，保证正确性和处理速度3000条/s  
### 2.人脸同步：  
#### ①人脸文件上传接口：  
目标：发送人脸数据给介质服务，由介质服务保存人脸文件到seafile中，并返回文件路径。  
#### ②人脸信息保存接口：  
目标：把人员id与人脸位置等相关信息提交给介质服务，由介质服务存入数据库中。  
#### ③人脸文件批量同步接口：  
目标：批量上传人脸文件，介质服务会主动将所有文件的信息同步到数据库中。  
### 3.指纹同步：
#### ①指纹文件上传接口：  
目标：发送指纹文件给介质服务，由介质服务保存指纹到seafile中，并返回路径。  
#### ②指纹信息保存接口：  
目标：把人员id与指纹信息提交给介质服务，由介质服务存入数据库中。  
#### ③指纹文件批量同步接口：  
目标：批量指纹文件通过介质服务上传，介质服务分析相关文件存入数据库中。    

### 4.卡片查询  
提供RESTFul风格的接口，提供查询卡片详细信息的接口。  
目标：正确返回信息即可。  
### 5.指纹查询  
提供RESTFul风格接口，提供指纹文件下载查询。  
说明：一个人对应10个指纹信息，即basicAccNo -> 多个 fingerNo。  
目标：可以查询1人的一个或多个指纹，多人的一个或多个指纹。  
### 6.人脸查询接口
提供RESTFul风格接口，查询人脸文件。  
目标：提供一个或多个人员id，返回一个或多个人脸文件url。  
### 7.获取文件下载路径  
说明：文件均存放在文件服务器seafile中，而文件的下载链接需要本服务提供。  
目标：提供文件存放路径和文件名，返回文件的可下载url。  
### 8.注册监听接口  
目标：监听不同类型的数据变更，能够正确收到变更通知。  
## 二.测试相关环境  
1.material-service(介质服务) -> centos7.3 linux64  
2.rabbitmq(消息队列服务) -> 10.0.0.96(同步用) ,10.9.99.5(通知用)。  
3.pg数据库：jdbc:postgresql://10.0.0.96:5320/acc_test username:postgres password:123456  
4.文件服务器： seafile -> http://10.3.0.26/  username:public@weds.com passwork:weds1.1  

